digraph G {
    compound=true;
    开始 [shape=none fillcolor=green style=filled]
    subgraph cluster0 {
        color=blue
        label="巡线1"
        "识别路角度并传递给\n底盘组更新四轮速度"-> 右摄像头识别橙色色块 
        右摄像头识别橙色色块 -> "识别路角度并传递给\n底盘组更新四轮速度" [label="未识别到"]
        右摄像头识别橙色色块 -> 投食 [label="识别到"]
    }
    subgraph cluster2 {
        color=blue
        label="沿x正方向直行"
        投食 -> 左摄像头识别桥
        检测小车方向与x正方向夹角 -> "将夹角传递给\n底盘组更新速度"
        "将夹角传递给\n底盘组更新速度" -> 左摄像头识别门 [label="在找门"]
    }
    subgraph cluster3 {
        color=blue
        label="桥/门前姿态调整"
        识别目标在左摄像头视野偏离程度 -> 左转90 [label="目标进入左摄像头中心区域"]
        左转90 -> 检测小车方向与z负方向夹角
        检测小车方向与z负方向夹角 -> 左转90 [label="未对准-z方向"]
    }
    subgraph cluster4 {
        color=blue
        label="过桥"
        沿z负方向直行 -> 路面摄像头检测桥后颜色信标
        路面摄像头检测桥后颜色信标 -> 沿z负方向直行 [label="未检测到"]
        路面摄像头检测桥后颜色信标 -> 右转90 [label="检测到"]
        右转90 -> 检测小车方向与x正方向夹角2
        检测小车方向与x正方向夹角2 -> 右转90 [label="未对准x方向"]
    }
    subgraph cluster5 {
        color=blue
        label="过门"
        沿z负方向直行2 -> 路面摄像头识别路
        路面摄像头识别路 -> 沿z负方向直行2 [label="未巡到"]
    }
    subgraph cluster6 {
        color=blue
        label="巡线2"
        "识别路角度并传递给\n底盘组更新速度" -> "前摄像头识别红/黄/紫色块" 
        "前摄像头识别红/黄/紫色块" -> "识别路角度并传递给\n底盘组更新速度" [label="未识别到"]
    }
    subgraph cluster7 {
        color=blue
        label="巡彩色线"
        决策接收Color信号并发给巡路 -> 路面摄像头识别同色路
        路面摄像头识别同色路 -> "识别路角度并传递给\n底盘更新四轮速度" -> 是否有路
        是否有路 -> "识别路角度并传递给\n底盘更新四轮速度" [label="是"]
    }
    开始 -> "识别路角度并传递给\n底盘组更新四轮速度"
    识别目标在左摄像头视野偏离程度 -> 检测小车方向与x正方向夹角 [label="目标偏离左摄像头中心区域"]
    左摄像头识别桥 -> 检测小车方向与x正方向夹角 [label="未识别到"]
    左摄像头识别门 -> 检测小车方向与x正方向夹角 [label="未识别到"]
    "将夹角传递给\n底盘组更新速度" -> 左摄像头识别桥 [label="在找桥"]
    左摄像头识别门 -> 识别目标在左摄像头视野偏离程度 [label="识别到"]
    检测小车方向与z负方向夹角 -> 沿z负方向直行 [label="对准-z方向"]
    检测小车方向与z负方向夹角 -> 沿z负方向直行2 [label="对准-z方向"]
    左摄像头识别桥 -> 识别目标在左摄像头视野偏离程度 [label="识别到"]
    检测小车方向与x正方向夹角2 -> 检测小车方向与x正方向夹角 [label="对准x方向"]
    路面摄像头识别路 -> "识别路角度并传递给\n底盘组更新速度" [label="在过门处巡到"]
    "前摄像头识别红/黄/紫色块" -> 决策接收Color信号并发给巡路 [label="识别到"]
    结束stop [shape=none fillcolor=red style=filled]
    是否有路 -> 结束stop [label="否"]
}